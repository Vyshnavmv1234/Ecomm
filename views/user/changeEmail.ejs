<%- include("../../views/partials/user/header") %>

<!-- ================= MAIN ================= -->
<main style="
  min-height:calc(80vh - 80px);
  display:flex;
  align-items:center;
  justify-content:center;
">

  <!-- VERIFY CARD -->
  <div style="
    width:520px;
    background:#fff;
    padding:60px 40px;
    border-radius:8px;
    border:1px solid #e5e5e5;
    text-align:center;
  ">

    <!-- FORM -->
    <form 
      action="/user/change-email" 
      method="POST" 
      onsubmit="return validateEmailForm()"
    >

      <h3 style="margin-bottom:20px;">Enter Current Email</h3>
      
      <input
      type="text"
      id="email"
      name="email"
      placeholder="example@gmail.com"
      style="
          width:260px;
          padding:10px;
          border:1px solid #bdbdbd;
          border-radius:4px;
          text-align:center;
          outline:none;
          "
      />
      

      <!-- ERROR MESSAGE -->
      <p 
        id="error"
        style="
          color:red;
          font-size:13px;
          margin-top:8px;
          display:none;
        ">
        Please enter a valid email address
      </p>
      <p id="error"
        style="
          color:red;
          font-size:13px;
          margin-top:8px;
        "><% if(message){%>
        <%=message%>
        <%}%>
      </p>

      <div style="margin-top:24px;">
        
        <button 
          type="submit"
          style="
            background:#4db6be;
            border:none;
            padding:10px 28px;
            color:white;
            font-size:14px;
            border-radius:6px;
            cursor:pointer;
          "
        >
          Verify
        </button>
      </div>
    </form>
  </div>
</main>


<script>
  function validateEmailForm() {
    const emailInput = document.getElementById("email");
    const errorEl = document.getElementById("error");

    const email = emailInput.value.trim();

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (email === "") {
      errorEl.textContent = "Email is required";
      errorEl.style.display = "block";
      return false;
    }

    if (!emailPattern.test(email)) {
      errorEl.textContent = "Please enter a valid email address";
      errorEl.style.display = "block";
      return false;
    }

    errorEl.style.display = "none";
    return true;
  }
</script>

</body>
</html>
